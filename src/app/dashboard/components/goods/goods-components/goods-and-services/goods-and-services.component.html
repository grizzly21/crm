<div class="control-panel">
  <h3 class="control-panel-title">Товари і послуги</h3>
  <button
    class="control-panel-btn"
    (click)="goodsPopUpToggle = !goodsPopUpToggle"
    routerLink="addGood"
    >Товар</button>
  <button
    class="control-panel-btn"
    (click)="goodsPopUpToggle = !goodsPopUpToggle"
    routerLink="addService"
    >Послуга</button>
  <button
    class="control-panel-btn"
    (click)="goodsPopUpToggle = !goodsPopUpToggle"
    routerLink="addKit"
    >Комплект</button>
</div>
<br>
<div class="goods-services-content">

  <!-- Category tree -->
  <div class="dropdown-category-list">
    <p-tree [value]="categoryService.categoryList"
            selectionMode="single"
            [filter]="true"
            [metaKeySelection]="false"
            [(selection)]="selectedCategory"
            (onNodeSelect)="nodeSelect($event)"
            (onNodeUnselect)="nodeUnselect($event)"
    ></p-tree>
  </div>

  <!-- Table of all goods and services -->
  <div class="items-table">
    <div class="card">
      <p-table
        #dt
        [value]="allItems"
        [rows]="10"
        [paginator]="true"
        [globalFilterFields]="['itemName','code','purchasePrice','salePrice']"
        [tableStyle]="{'min-width': '60rem'}"
        [(selection)]="selectedProducts"
        [rowHover]="true"
        dataKey="id"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [showCurrentPageReport]="false">
        <ng-template pTemplate="caption">
          <div class="table-caption">
            <h5 class="m-0">Manage Products</h5>
            <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input type="text" pInputText (input)="dt.filterGlobal(getEventValue($event), 'contains')" placeholder="Search..." />
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="itemName" style="min-width:10rem">Назва<p-sortIcon field="itemName"></p-sortIcon></th>
            <th style="min-width:6rem">Зображення</th>
            <th>Тип</th>
            <th pSortableColumn="code">Код<p-sortIcon field="code"></p-sortIcon></th>
            <th style="min-width:4rem">Од.вимір.</th>
            <th pSortableColumn="purchasePrice">Закуп <p-sortIcon field="purchasePrice"></p-sortIcon></th>
            <th pSortableColumn="salePrice">Продаж <p-sortIcon field="salePrice"></p-sortIcon></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
          <tr>
            <td>{{product.itemName}}</td>
            <td><img [src]="product.itemImage" alt="#" width="100" class="shadow-4"/></td>
            <td>{{product.type}}</td>
            <td>{{product.code}}</td>
            <td>{{product.unitOfMeasurement}}</td>
            <td>{{product.purchasePrice | currency}}</td>
            <td>{{product.salePrice | currency}}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
<!-- Pop up window for adding the goods, service & kits-->
<div class="pop-up-container" *ngIf="goodsPopUpToggle">
  <div
    class="pop-up-close-block"
    (click)="goodsPopUpToggle = !goodsPopUpToggle"
    routerLink="../"
    ></div>
  <div class="pop-up-content">
    <router-outlet></router-outlet>
  </div>
</div>
